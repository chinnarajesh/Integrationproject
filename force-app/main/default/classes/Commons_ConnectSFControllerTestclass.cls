@isTest
public  class Commons_ConnectSFControllerTestclass {
    @TestSetup static void Testdata(){ 
     
        
        SalesforceCredentials__c cred = new SalesforceCredentials__c();
        cred.clientId__c='3MVG9jBOyAOWY5bXr3J_GAgfXISAg.QxnjVVhmA9tMsyrF4PWNYc4l3Mim7b7aChNKU5NrRV3Y1wCQrcu01aQ';
        cred.clientSecret__c='64F68422C6CAB073DC8634AA8DB7B5279460DECB2C9B23F4CF2948281A2128C0';
        cred.password__c='rajeshdev7@VyCml7e8ObCF9pR5J3aVppoJ';
        cred.username__c='apiuser@commons.com.rajeshdev';
        cred.Salesforce_URL__c='https://commons--rajeshdev.my.salesforce.com';
        insert cred;
         
         Unit__c unit = new Unit__c();
         unit.Name='test unit';
         unit.Status__c='Early Connection';
         unit.Appointee_Date__c=system.today();
         unit.Initial_Departure__c=system.today();
         unit.Preferred_Contact__c='FB Messenger';
         unit.Wedding_Date__c=system.today();
         insert unit;
         
         Unit__c unit2 = new Unit__c();
         unit2.Name='test unit2';
         unit2.Status__c='Appointee';
         unit2.Appointee_Date__c=system.today();
         unit2.Initial_Departure__c=system.today();
         unit2.Preferred_Contact__c='WhatsApp';
         unit2.Wedding_Date__c=system.today();
         insert unit2;
             
         Unit__c unit3 = new Unit__c();
         unit3.Name='test unit3';
         unit3.Status__c='On-Field';
         unit3.Appointee_Date__c=system.today();
         unit3.Initial_Departure__c=system.today();
         unit3.Preferred_Contact__c='Text';
         insert unit3;
         
         Unit__c unit4 = new Unit__c();
         unit4.Name='test unit4';
         unit4.Status__c='Home Assignment';
         unit4.Appointee_Date__c=system.today();
         unit4.Initial_Departure__c=system.today();
         unit4.Preferred_Contact__c='Email';
         insert unit4;
        
         Lifecycle__c life = new Lifecycle__c();
         life.Name='test life';
         life.Unit__c=unit4.id;
         life.Stage__c='Concluding HA';
         life.Term_Start_Date__c=system.today();
         life.Lifecycle_Country__c='Australia';
         life.RecordTypeId=Schema.SObjectType.Lifecycle__c.getRecordTypeInfosByName().get('Concluding').getRecordTypeId();
         insert life;
         
         Contact con4 = new Contact();
         con4.FirstName='varun';
         con4.LastName='v';
         con4.Unit__c=unit4.Id;
         con4.Birthdate=system.today();
         con4.Gender__c='male';
         con4.npe01__PreferredPhone__c='Home';
         con4.npe01__Preferred_Email__c='Personal';
         con4.npe01__HomeEmail__c='peter34@gmail.com';
         con4.npe01__WorkEmail__c='peter56@gmail.com';
         con4.npe01__AlternateEmail__c='pet578@gmail.com';
         con4.HomePhone='9483957789';
         con4.Fax='meet';
         insert con4;
         
         Contact con3 = new Contact();
         con3.FirstName='karthik';
         con3.LastName='k';
         con3.Unit__c=unit3.Id;
         con3.Birthdate=system.today();
         con3.Gender__c='male';
         con3.npe01__PreferredPhone__c='Work';
         con3.npe01__Preferred_Email__c='alternate';
         con3.npe01__AlternateEmail__c='peter34@gmail.com';
         con3.npe01__WorkPhone__c='9483957789';
         con3.Fax='meet';
         con3.Field_Phone__c='3874538478';
         con3.MailingCity='San Francisco';
         con3.MailingStreet='345 California Street';
         con3.MailingCountry='United States';
         con3.MailingState='CA';
         con3.MailingPostalCode='94104';
         con3.Expat_Digital__c='Completed';
         con3.Child_Safety__c='Completed';
         con3.OST_Status__c='Completed';
         con3.In_Person_Security__c='Completed';
         con3.Citizenship__c='Other';
         con3.Citizenship_Country__c='Australia';
         insert con3;
         
         Contact con = new Contact();
         con.FirstName='peter';
         con.LastName='parkar';
         con.Unit__c=unit.Id;
         con.Birthdate=system.today();
         con.Gender__c='male';
         con.npe01__PreferredPhone__c='Work';
         con.npe01__Preferred_Email__c='personal';
         con.npe01__HomeEmail__c='peter34@gmail.com';
         con.npe01__WorkPhone__c='9483957789';
         con.Skype__c='meet';
         con.Field_Phone__c='3874538478';
         con.MailingCity='San Francisco';
         con.MailingStreet='345 California Street';
         con.MailingCountry='United States';
         con.MailingState='CA';
         con.MailingPostalCode='94104';
         con.Expat_Digital__c='Completed';
         con.Child_Safety__c='Completed';
         con.OST_Status__c='Completed';
         con.In_Person_Security__c='Completed';
         con.Citizenship__c ='Australian';
         insert con;
         
         Contact con2 = new Contact();
         con2.FirstName='messi';
         con2.LastName='moy';
         con2.Unit__c=unit2.Id;
         con2.Birthdate=system.today();
         con2.Gender__c='male';
         con2.npe01__PreferredPhone__c='Work';
         con2.npe01__Preferred_Email__c='Work';
         con2.npe01__WorkEmail__c='peter34@gmail.com';
         con2.npe01__WorkPhone__c='9483957789';
         con2.Skype__c='meet';
         con2.Field_Phone__c='3874538478';
         con2.MailingCity='San Francisco';
         con2.MailingStreet='345 California Street';
         con2.MailingCountry='United States';
         con2.MailingState='CA';
         con2.MailingPostalCode='94104';
         con2.Expat_Digital__c='Completed';
         con2.Child_Safety__c='Completed';
         con2.OST_Status__c='Completed';
         con2.In_Person_Security__c='Completed';
         con2.Citizenship__c ='Dual';
         con2.Citizenship_Country__c='Australia';
         insert con2;
         
         Dependent__c depp = new Dependent__c();
         depp.First_Name__c='ronald';
         depp.Last_Name__c='roy';
         depp.Birthdate__c=system.today();
         depp.Gender__c='male';
         depp.Email__c='roy34@gmail.com';
         depp.Mobile__c='9485787898';
         depp.Unit__c=unit.id;
         depp.Education__c='Home School';
         insert depp;
          
         Dependent__c depp2 = new Dependent__c();
         depp2.First_Name__c='banu';
         depp2.Last_Name__c='b';
         depp2.Birthdate__c=system.today();
         depp2.Gender__c='male';
         depp2.Email__c='roy34@gmail.com';
         depp2.Mobile__c='9485787898';
         depp2.Unit__c=unit4.Id;
         depp2.Education__c='Boarding School';
         insert depp2;

     }
      @isTest static void tesdatatwo(){
           Unit__c unit1 =[select id,name from Unit__c where Name='test unit'];
           Unit__c unit3 =[select id,name from Unit__c where name='test unit3'];
           Unit__c unit4 =[select id,name from unit__c where name='test unit4'];
           Unit__c unit5 =[select id,name from unit__c where name='test unit2'];
           contact contact =[select id,name from Contact where FirstName='messi'];
           contact contact1 =[select id,name from contact where FirstName='karthik'];
           Contact contact2 = [select id,name from contact where FirstName='varun'];
           Dependent__c depen=[select id,name from Dependent__c where First_Name__c='ronald'];
           Dependent__c depp2 =[select id,name from Dependent__c where First_Name__c='banu'];
           Test.setMock(HttpCalloutMock.class, new Commons_MockcalloutsTestClass());
           Test.startTest();
           Commons_ConnectSFController.getRequestToken();
           unit1.Status__c='Appointee';
           update unit1;
           //unit5.Name='test five';
           //update unit5;
           Commons_ConnectSFController.firstcall=false;
           unit4.Name='test';
           update unit4;
           Commons_ConnectSFController.firstcall=false;
           unit4.Status__c='Medical Leave'; 
           update unit4;
           Commons_ConnectSFController.firstcall=false;
           unit4.Status__c='Concluded'; 
           unit4.Preferred_Contact__c='FB Messenger';
           update unit4;
           Commons_ConnectSFController.firstcall=false;
           contact2.Gender__c='male';
           update contact2;
           Commons_ConnectSFController.firstcall=false;
           contact2.Gender__c='female';
           update contact2;
           Commons_ConnectSFController.firstcall=false;
           contact2.Gender__c='female';
           update contact2;
           Commons_ConnectSFController.firstcall=false;
           unit3.Name='ronald3';
           update unit3;
           Commons_ConnectSFController.firstcall=false;
           contact.MailingPostalCode='75389457';
           update contact;
           Commons_ConnectSFController.firstcall=false;
           contact1.Gender__c='female';
           update contact1;
           Commons_ConnectSFController.firstcall=false;
           depen.Gender__c='female';
           update depen;
           Commons_ConnectSFController.firstcall=false;
           depp2.Gender__c='female';
           update depp2;
           Commons_ConnectSFController.firstcall=false;
           Dependent__c depp3 = new Dependent__c();
           depp3.First_Name__c='banu';
           depp3.Last_Name__c='b';
           depp3.Birthdate__c=system.today();
           depp3.Gender__c='male';
           depp3.Email__c='roy34@gmail.com';
           depp3.Mobile__c='9485787898';
           depp3.Unit__c=unit5.Id;
           depp3.Education__c='Local School';
           depp3.Citizenship__c ='Australian';
           insert depp3;
           Commons_ConnectSFController.firstcall=false;
           unit5.Status__c='ST On-Field';
           unit5.Preferred_Contact__c='Email';
           update unit5;
           Commons_ConnectSFController.firstcall=false;
           Dependent__c depp4 = new Dependent__c();
           depp4.First_Name__c='banu';
           depp4.Last_Name__c='b';
           depp4.Birthdate__c=system.today();
           depp4.Gender__c='male';
           depp4.Email__c='roy34@gmail.com';
           depp4.Mobile__c='9485787898';
           depp4.Unit__c=unit5.Id;
           depp4.Education__c='Not old enough';
           depp4.Citizenship__c ='Dual';
           insert depp4;
           Commons_ConnectSFController.firstcall=false;
           npe4__Relationship__c relation = new npe4__Relationship__c();
           relation.npe4__Contact__c=contact1.id;
           relation.npe4__RelatedContact__c=contact2.id;
           relation.npe4__Type__c='Friend';
           relation.npe4__Status__c='Current';
           insert relation;
           Test.stopTest();
      }
}